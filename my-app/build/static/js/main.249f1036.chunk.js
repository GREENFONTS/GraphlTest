(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{28:function(e,t,a){},38:function(e,t,a){e.exports=a(52)},52:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(31),i=a.n(o),l=(a(28),a(12)),c=a(13),s=a(15),u=a(14),m=a(53),d=a(17),h=a(11);function p(){var e=Object(d.a)(["\nquery($id:String){\n    book(id:$id){\n        name \n        genre\n        id\n        author{\n            name \n            nationality \n            id \n            books{\n                name\n                }\n            }\n        }\n    }\n"]);return p=function(){return e},e}function b(){var e=Object(d.a)(["\n  mutation($name: String!, $nationality: String!) {\n    addAuthor(Name: $name, nationality: $nationality) {\n      name\n      id\n    }\n  }\n"]);return b=function(){return e},e}function f(){var e=Object(d.a)(["\n  mutation($name: String!, $genre: String!, $authorid: ID!) {\n    addBook(Name: $name, Genre: $genre, AuthorId: $authorid) {\n      name\n      id\n    }\n  }\n"]);return f=function(){return e},e}function k(){var e=Object(d.a)(["\n  {\n    books {\n      name\n      id\n    }\n  }\n"]);return k=function(){return e},e}function y(){var e=Object(d.a)(["\n  {\n    authors {\n      name\n      id\n    }\n  }\n"]);return y=function(){return e},e}var v=Object(h.b)(y()),E=Object(h.b)(k()),N=Object(h.b)(f()),A=Object(h.b)(b()),g=Object(h.b)(p()),j=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"DisplayDetails",value:function(){var e=this.props.data,t=this.props.data.book;return e.loading?r.a.createElement("div",null,"Books Details Loading..."):t?r.a.createElement("div",{id:"Book-Details"},r.a.createElement("h3",{className:"p-2"}," ",t.name),r.a.createElement("p",{className:"p-2"},"Genre: ",t.genre),r.a.createElement("p",{className:"p-2"},"Author: ",t.author.name),r.a.createElement("p",{className:"p-2"},"Author's Nationality: ",t.author.nationality),r.a.createElement("hr",null),r.a.createElement("h5",{className:"p-2"},"Books by the Author"),t.author.books.map((function(e){return r.a.createElement("ul",{className:"p-2"},r.a.createElement("li",{key:e.id},e.name))}))):r.a.createElement("div",null,r.a.createElement("hr",null),"No book selected...")}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},this.DisplayDetails())}}]),a}(n.Component),O=Object(m.a)(g,{options:function(e){return{variables:{id:e.bookid}}}})(j),B=a(24),D=a.n(B),S=a(35),$=a(37),x=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={BookName:"",Genre:"",AuthorId:"",AuthorName:"",Nationality:"",BookDisplay:!1,AuthorDisplay:!0},n}return Object(c.a)(a,[{key:"DisplayAuthors",value:function(){var e=this.props.getAuthors;return e.loading?r.a.createElement("option",{disabled:!0},"Authors Loading..."):e.authors.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id}," ",e.name)}))}},{key:"BookPost",value:function(e){try{this.props.AddBooks({variables:{name:this.state.Name,genre:this.state.Genre,authorid:this.state.AuthorId},refetchQueries:[{query:E}]})}catch(t){console.log(t)}}},{key:"AuthorPost",value:function(){var e=Object(S.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(this.state),e.prev=1,e.next=4,this.props.AddAuthor({variables:{name:this.state.AuthorName,nationality:this.state.Nationality}});case 4:e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(1),console.log("name already exists"),e.abrupt("return",alert("Author has Already been Registered"));case 10:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()},{key:"BookForm",value:function(){var e=this;return r.a.createElement("form",{onSubmit:this.BookPost.bind(this),className:"container p-3"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Book Name:"),r.a.createElement("input",{className:"form-control",type:"text",name:"Name",placeholder:"Enter book name",id:"Name",onChange:function(t){e.setState({Name:t.target.value})},required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Book Genre:"),r.a.createElement("input",{className:"form-control",type:"text",name:"Genre",placeholder:"Enter book genre",id:"Genre",onChange:function(t){e.setState({Genre:t.target.value})},required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Author: "),r.a.createElement("select",{id:"authors",className:"form-control",onChange:function(t){e.setState({AuthorId:t.target.value})},required:!0},r.a.createElement("option",null,"Select Author"),this.DisplayAuthors())),r.a.createElement("button",{type:"submit",id:"addbutton"},"+"))}},{key:"AuthorForm",value:function(){var e=this;return r.a.createElement("form",{onSubmit:this.AuthorPost.bind(this),className:"container p-3"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Author: "),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Enter Author name",onChange:function(t){e.setState({AuthorName:t.target.value})},required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Author's Nationality: "),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Enter Author's Nationality",onChange:function(t){e.setState({Nationality:t.target.value})},required:!0})),r.a.createElement("button",{type:"submit",id:"addbutton"},"+"))}},{key:"Displaychoice",value:function(e){return!0===this.state.AuthorDisplay?this.AuthorForm():this.BookForm()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form"},this.Displaychoice(),r.a.createElement("button",{className:"btn btn-info mr-1 mt-2",onClick:function(t){e.setState({AuthorDisplay:!0,BookDisplay:!1})}},"Add Author"),r.a.createElement("button",{className:"btn btn-info ml-2 mt-2",onClick:function(t){e.setState({AuthorDisplay:!1,BookDisplay:!0})}},"Add Book"))}}]),a}(n.Component),C=Object($.a)(Object(m.a)(v,{name:"getAuthors"}),Object(m.a)(N,{name:"AddBooks"}),Object(m.a)(A,{name:"AddAuthor"}))(x),q=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={clicked:""},n}return Object(c.a)(a,[{key:"DisplayBooks",value:function(){var e=this,t=this.props.data;return t.loading?r.a.createElement("div",null,"Books Loading..."):t.books.map((function(t){return r.a.createElement("li",{key:t.id,onClick:function(a){return e.setState({clicked:t.id})},className:"d-inline-block",id:"BookList"}," ",t.name)}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"row pt-3 ml-2"},r.a.createElement("div",{className:"col-md-6 m-1",id:"books-container"},r.a.createElement("ul",{className:" container p-0"},this.DisplayBooks()),r.a.createElement(C,null)),r.a.createElement("div",{className:"col-md-5 container-fluid",id:"book-Display"},r.a.createElement(O,{bookid:this.state.clicked})))}}]),a}(n.Component),G=Object(m.a)(E)(q),w=a(5),I=new h.a({uri:"http://localhost:4000/graphql"}),L=function(){return r.a.createElement(w.b,{client:I},r.a.createElement("div",{className:"App"},r.a.createElement("h1",{className:"header text-center p-3",id:"header-text"}," My BookList"),r.a.createElement("div",{className:"container-fluid m-2"},r.a.createElement(G,null))))};i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(L,null)),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.249f1036.chunk.js.map